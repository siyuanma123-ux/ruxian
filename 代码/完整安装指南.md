# End-to-endæ¨¡å‹å®Œæ•´å®‰è£…æŒ‡å—

## âš ï¸ é‡è¦æç¤º

**TensorFlow 1.15.0 ä¸æ”¯æŒ Python 3.9**ï¼Œåªæ”¯æŒåˆ° Python 3.7ã€‚

å½“å‰Pythonç‰ˆæœ¬: 3.9.6

## âœ… å·²å®Œæˆçš„å®‰è£…

- âœ… Keras 2.0.8 å·²å®‰è£…
- âœ… åŸºç¡€ä¾èµ–åŒ…å·²å®‰è£…ï¼ˆh5py, scipy, pillowç­‰ï¼‰
- âŒ TensorFlow 1.15.0 å®‰è£…å¤±è´¥ï¼ˆéœ€è¦Python 3.7ï¼‰

## ğŸ”§ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1: ä½¿ç”¨condaåˆ›å»ºPython 3.7ç¯å¢ƒï¼ˆæ¨èï¼‰â­

```bash
# 1. åˆ›å»ºcondaç¯å¢ƒï¼ˆPython 3.7ï¼‰
conda create -n end2end python=3.7 -y

# 2. æ¿€æ´»ç¯å¢ƒ
conda activate end2end

# 3. å®‰è£…ä¾èµ–
pip install keras==2.0.8
pip install tensorflow==1.15.0
pip install h5py scipy pillow opencv-python pandas "numpy<1.20"

# 4. éªŒè¯å®‰è£…
python -c "import keras; import tensorflow as tf; print('Keras:', keras.__version__); print('TensorFlow:', tf.__version__)"
```

### æ–¹æ¡ˆ2: ä½¿ç”¨pyenvå®‰è£…Python 3.7

```bash
# 1. å®‰è£…pyenvï¼ˆå¦‚æœæœªå®‰è£…ï¼‰
brew install pyenv

# 2. å®‰è£…Python 3.7
pyenv install 3.7.16

# 3. åœ¨é¡¹ç›®ç›®å½•è®¾ç½®Pythonç‰ˆæœ¬
cd /Users/masiyuan/Desktop/ä¹³è…ºç™Œ
pyenv local 3.7.16

# 4. å®‰è£…ä¾èµ–
pip install keras==2.0.8 tensorflow==1.15.0 h5py scipy pillow opencv-python pandas "numpy<1.20"
```

### æ–¹æ¡ˆ3: ä½¿ç”¨Dockerï¼ˆæœ€ç¨³å®šï¼‰

```dockerfile
FROM python:3.7-slim

WORKDIR /app

RUN pip install keras==2.0.8 tensorflow==1.15.0 h5py scipy pillow opencv-python pandas "numpy<1.20"

COPY . .

CMD ["python", "diagnose_with_high_accuracy_model.py"]
```

## ğŸ“¥ ä¸‹è½½é¢„è®­ç»ƒæƒé‡

### æ–¹æ³•1: æ‰‹åŠ¨ä¸‹è½½ï¼ˆæ¨èï¼‰

1. **è®¿é—®Google Drive**:
   ```
   https://drive.google.com/drive/folders/0B1PVLadG_dCKV2pZem5MTjc1cHc
   ```

2. **æ¨èä¸‹è½½çš„æ¨¡å‹**:
   - **INbreast VGG16 [512-512-1024]x2**: AUC 0.95-0.96 â­ æœ€é«˜å‡†ç¡®ç‡
   - **DDSM Resnet50 [512-512-1024]x2**: AUC 0.86-0.91

3. **ä¿å­˜ä½ç½®**:
   ```bash
   mkdir -p pretrained_models/end-to-end_all_convolutional_design/weights
   # å°†ä¸‹è½½çš„.h5æ–‡ä»¶æ”¾åˆ°è¿™ä¸ªç›®å½•
   ```

### æ–¹æ³•2: ä½¿ç”¨gdownï¼ˆå¦‚æœçŸ¥é“æ–‡ä»¶IDï¼‰

```bash
# å®‰è£…gdown
pip install gdown

# ä¸‹è½½æ–‡ä»¶ï¼ˆéœ€è¦ä»Google Driveé“¾æ¥ä¸­æå–æ–‡ä»¶IDï¼‰
# gdown <file_id> -O pretrained_models/end-to-end_all_convolutional_design/weights/model.h5
```

## ğŸš€ ä½¿ç”¨æ¨¡å‹è¿›è¡Œè¯Šæ–­

### æ­¥éª¤1: æ¿€æ´»ç¯å¢ƒï¼ˆå¦‚æœä½¿ç”¨condaï¼‰

```bash
conda activate end2end
```

### æ­¥éª¤2: è¿è¡Œè¯Šæ–­

```bash
cd ä»£ç 
python diagnose_with_high_accuracy_model.py \
    --mammo_dir "../é’¼é¶æŠ¥å‘Š" \
    --output_dir "../æœªå‘½åæ–‡ä»¶å¤¹ 2" \
    --end2end_model "../pretrained_models/end-to-end_all_convolutional_design/weights/inbreast_vgg16_[512-512-1024]x2.h5"
```

## ğŸ“‹ å¿«é€Ÿæ£€æŸ¥æ¸…å•

- [ ] Python 3.7ç¯å¢ƒå·²åˆ›å»º
- [ ] Keras 2.0.8å·²å®‰è£…
- [ ] TensorFlow 1.15.0å·²å®‰è£…
- [ ] é¢„è®­ç»ƒæƒé‡å·²ä¸‹è½½åˆ°weightsç›®å½•
- [ ] æ¨¡å‹å¯ä»¥æˆåŠŸåŠ è½½

## ğŸ†˜ å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆTensorFlow 1.15.0å®‰è£…å¤±è´¥ï¼Ÿ
A: TensorFlow 1.xåªæ”¯æŒåˆ°Python 3.7ï¼ŒPython 3.9ä¸æ”¯æŒã€‚éœ€è¦ä½¿ç”¨condaæˆ–pyenvåˆ›å»ºPython 3.7ç¯å¢ƒã€‚

### Q: å¯ä»¥ä½¿ç”¨TensorFlow 2.xå—ï¼Ÿ
A: ä¸æ¨èã€‚End-to-endæ¨¡å‹ä»£ç æ˜¯ä¸ºTensorFlow 1.xè®¾è®¡çš„ï¼Œä½¿ç”¨TensorFlow 2.xå¯èƒ½éœ€è¦å¤§é‡ä¿®æ”¹ã€‚

### Q: æƒé‡æ–‡ä»¶åœ¨å“ªé‡Œä¸‹è½½ï¼Ÿ
A: ä»Google Driveä¸‹è½½: https://drive.google.com/drive/folders/0B1PVLadG_dCKV2pZem5MTjc1cHc

### Q: å¦‚ä½•éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸï¼Ÿ
A: è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
```python
import keras
import tensorflow as tf
print("Keras:", keras.__version__)  # åº”è¯¥æ˜¯ 2.0.8
print("TensorFlow:", tf.__version__)  # åº”è¯¥æ˜¯ 1.15.0
```

## ğŸ“ å½“å‰çŠ¶æ€

- âœ… æ¨¡å‹ä»£ç å·²ä¸‹è½½
- âœ… Keras 2.0.8å·²å®‰è£…
- âœ… åŸºç¡€ä¾èµ–å·²å®‰è£…
- âŒ TensorFlow 1.15.0éœ€è¦Python 3.7ç¯å¢ƒ
- â³ ç­‰å¾…ä¸‹è½½é¢„è®­ç»ƒæƒé‡

## ğŸ¯ æ¨èæ“ä½œæµç¨‹

1. **åˆ›å»ºcondaç¯å¢ƒ**ï¼ˆæœ€ç®€å•ï¼‰:
   ```bash
   conda create -n end2end python=3.7 -y
   conda activate end2end
   ```

2. **å®‰è£…ä¾èµ–**:
   ```bash
   pip install keras==2.0.8 tensorflow==1.15.0 h5py scipy pillow opencv-python pandas "numpy<1.20"
   ```

3. **ä¸‹è½½æƒé‡æ–‡ä»¶**ï¼ˆæ‰‹åŠ¨ä»Google Driveï¼‰

4. **è¿è¡Œè¯Šæ–­è„šæœ¬**


